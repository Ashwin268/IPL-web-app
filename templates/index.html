<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>IPL Service Dashboard</title>
    <!-- Bootstrap 5 -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light">
    <div class="container py-5">
        <h1 class="text-center mb-5 text-primary">üèè IPL Service Dashboard</h1>

        <div class="row g-4">
            <div class=" text-dark py-2 mb-3">
                <marquee behavior="scroll" direction="left" scrollamount="6">
                    üì¢ Data of IPL is between <strong>2008</strong> to <strong>2024</strong>
                </marquee>
            </div>
            <!-- Compare Teams Card -->
            <div class="col-md-6">
                <div class="card shadow border-0 rounded-4">
                    <div class="card-body">
                        <h4 class="card-title text-success mb-4">Compare Two Teams</h4>
                        <form action="/teamvsteam" method="get" class="row g-3" onsubmit="return validateCompareForm()">
                            <div class="col-md-6">
                                <label class="form-label">Team 1</label>
                                <select name="team1" id="team1" class="form-select" required>
                                    {% if teams %}
                                        <option value="">Please select</option>
                                        {% for t in teams %}
                                        <option value="{{ t }}" {% if request.args.get('team1') == t %}selected{% endif %}>{{ t }}</option>
                                        {% endfor %}
                                    {% endif %}
                                </select>
                            </div>
                            <div class="col-md-6">
                                <label class="form-label">Team 2</label>
                                <select name="team2" id="team2" class="form-select" required>
                                    {% if teams %}
                                        <option value="">Please select</option>
                                        {% for t in teams %}
                                        <option value="{{ t }}" {% if request.args.get('team2') == t %}selected{% endif %}>{{ t }}</option>
                                        {% endfor %}
                                    {% endif %}
                                </select>
                            </div>
                            <div class="col-12">
                                <button type="submit" class="btn btn-success w-100">Compare</button>
                            </div>
                        </form>

                        {% if result %}
                            <div class="mt-4">
                                <h5 class="text-secondary">Comparison Result</h5>
                                <table class="table table-bordered table-striped text-center">
                                    <thead class="table-success">
                                        <tr>
                                            <th>Team</th>
                                            <th>Matches Won</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        {% for k,v in result.items() if k not in ['total_matches','draws'] %}
                                            <tr>
                                                <td>{{ k }}</td>
                                                <td>{{ v }}</td>
                                            </tr>
                                        {% endfor %}
                                        <tr class="table-warning">
                                            <td>Draws</td>
                                            <td>{{ result['draws'] }}</td>
                                        </tr>
                                        <tr class="table-primary fw-bold">
                                            <td>Total Matches</td>
                                            <td>{{ result['total_matches'] }}</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        {% endif %}
                    </div>
                </div>
            </div>

            <!-- Team Records Card -->
            <div class="col-md-6">
                <div class="card shadow border-0 rounded-4">
                    <div class="card-body">
                        <h4 class="card-title text-primary mb-4">Team Records</h4>
                        <form action="/teamrecords" method="get" class="row g-3" onsubmit="return validateTeamForm()">
                            <div class="col-12">
                                <label class="form-label">Select Team</label>
                                <select name="team" id="team" class="form-select" required>
                                    <option value="">-- Please select --</option>
                                    {% for t in teams %}
                                        <option value="{{ t }}" {% if selected_team == t %}selected{% endif %}>{{ t }}</option>
                                    {% endfor %}
                                </select>
                            </div>
                            <div class="col-12">
                                <button type="submit" class="btn btn-primary w-100">Get Records</button>
                            </div>
                        </form>
                        {% if team_result %}
                        <div class="mt-4">
                             <h5 class="text-secondary">Team Records: {{ selected_team }}</h5>
                            <pre class="bg-light p-3 rounded small text-start">
                                {{ team_result | tojson(indent=2) }}
                            </pre>
                        </div>
                        {% endif %}
                        <!--{% if team_result %}
                            <div class="mt-4">
                                <h5 class="text-secondary">Team Records: {{ selected_team }}</h5>
                                <table class="table table-bordered table-striped text-center">
                                    <thead class="table-primary">
                                        <tr>
                                            <th>Metric</th>
                                            <th>Value</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        {% for k,v in team_result.items() %}
                                            <tr>
                                                <td>{{ k | replace("_"," ") | capitalize }}</td>
                                                <td>{{ v }}</td>
                                            </tr>
                                        {% endfor %}
                                    </tbody>
                                </table>
                            </div>
                        {% endif %}-->
                    </div>
                </div>
            </div>

        </div>
    </div>

    <script>
        function validateCompareForm() {
            let t1 = document.getElementById("team1").value;
            let t2 = document.getElementById("team2").value;
            if (t1 === "" || t2 === "") {
                alert("Please select both teams!");
                return false;
            }
            if (t1 === t2) {
                alert("Please select two different teams!");
                return false;
            }
            return true;
        }

        function validateTeamForm() {
            let t = document.getElementById("team").value;
            if (t === "") {
                alert("Please select a team!");
                return false;
            }
            return true;
        }
    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
